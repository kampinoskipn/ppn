(function(){document.addEventListener('DOMContentLoaded',()=>{if(!document.location.pathname.includes('/komunikaty-turystyczne'))return;const e={degPlace:document.getElementById('degree'),warning:document.getElementById('warning'),aDate:document.getElementById('date'),ico:document.querySelector('#zagrozenie-pozarowe svg rect')},c={0:{color:'blue',removeWarning:!0},1:{color:'green',removeWarning:!0},2:{color:'orange',removeWarning:!0},3:{color:'red',removeWarning:!1},default:{color:'darkgrey',fontSize:'small',removeWarning:!0}},r=()=>{e.degPlace.classList.remove('loadingspinner');e.aDate.classList.remove('loadingspinner')},o=d=>{const g=c[d]||c.default;e.degPlace.style.color=g.color;g.fontSize&&(e.degPlace.style.fontSize=g.fontSize);e.ico&&e.ico.setAttribute('fill',g.color);g.removeWarning&&e.warning&&e.warning.remove()},f=()=>{r();e.degPlace.innerHTML='<i>/brak danych/</i>';e.aDate.innerHTML='<i>/brak danych/</i>';o(null)};(async()=>{const t=new AbortController(),i=setTimeout(()=>t.abort(),1e4);try{const n=await fetch('https://api.kampinoski-pn.gov.pl/api/ppoz',{signal:t.signal});if(clearTimeout(i),!n.ok)throw new Error(`HTTP error: ${n.status}`);const a=await n.json();if(!a||typeof a!=='object'||a.error||a.degree===undefined||a.date===undefined){console.warn('Nieprawidłowe dane:',a.message||'Nieznany błąd');f();return}r();a.degree!==null&&(e.degPlace.innerHTML=a.degree);a.date!==null&&(e.aDate.innerHTML=a.date);o(a.degree)}catch(s){clearTimeout(i);console.error(s.name==='AbortError'?'Timeout zapytania':'Błąd zapytania:',s);f()}})()})})();